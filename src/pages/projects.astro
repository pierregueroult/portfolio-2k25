---
import { getCollection } from "astro:content";
import ProjectItem from "../components/items/ProjectItem.astro";
import Layout from "../layouts/Layout.astro";
import ListLayout from "../layouts/ListLayout.astro";
import WithTitleLayout from "../layouts/WithTitleLayout.astro";

const allProjects = await getCollection("projects");

const projects = allProjects.filter((project) => project.data.kind === "project");
const creations = allProjects.filter((project) => project.data.kind === "creation");
const contributions = allProjects.filter((project) => project.data.kind === "contribution");

---

<Layout
  title="Projects & Work"
  description="Explore my latest web development projects, automation tools, and tech experiments. Always building, always learning."
  keywords={[
    "Pierre GuÃ©roult",
    "projects",
    "web development",
    "automation",
    "portfolio",
    "coding",
    "software development",
    "tech",
    "CS student",
  ]}
>
  <WithTitleLayout
    title="Projects, Creations and contributions"
    subtitle="Here are some of the projects I've led, built, or contributed to. I focus on creating developer tools, automation solutions, and innovative web applications that improve efficiency, streamline workflows, and push the boundaries of technology."
  >
    {creations.length > 0 && (
      <ListLayout title="Creations">
        {
          creations.map((project) => (
            <ProjectItem
              title={project.data.slug}
              subtitle={project.data.role}
              text={project.data.description}
              slug={project.data.slug}
            />
          ))
        }
      </ListLayout>
    )}
    {projects.length > 0 && (
      <ListLayout title="Projects">
        {
          projects.map((project) => (
            <ProjectItem
              title={project.data.slug}
              subtitle={project.data.role}
              text={project.data.description}
              slug={project.data.slug}
            />
          ))
        }
      </ListLayout>
    )}
    {contributions.length > 0 && (
      <ListLayout title="Contributions">
        {
          contributions.map((project) => (
            <ProjectItem
              title={project.data.slug}
              subtitle={project.data.role}
              text={project.data.description}
              slug={project.data.slug}
            />
          ))
        }
      </ListLayout>
    )}
  </WithTitleLayout>
</Layout>
